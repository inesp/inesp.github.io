<svg viewBox="0 0 480 380" xmlns="http://www.w3.org/2000/svg" font-family="system-ui, -apple-system, sans-serif">
  <!-- Background -->
  <rect width="480" height="380" fill="#fff"/>

  <!-- Arrowhead marker definition -->
  <defs>
    <marker id="arrow" markerWidth="4" markerHeight="4" refX="3" refY="2" orient="auto">
      <polygon points="0,0 4,2 0,4" fill="#212529"/>
    </marker>
    <marker id="arrow-thick" markerWidth="4" markerHeight="4" refX="3" refY="2" orient="auto">
      <polygon points="0,0 4,2 0,4" fill="#212529"/>
    </marker>
  </defs>

  <!-- START: Initial border -->
  <rect x="170" y="10" width="140" height="40" rx="4" fill="#ffed50" stroke="#e7d749" stroke-width="1.5"/>
  <text x="240" y="26" text-anchor="middle" font-size="9" fill="#212529" font-weight="bold">Initial border = </text>
  <text x="240" y="40" text-anchor="middle" font-size="8" fill="#212529">max(mean+3Ïƒ, 99.7th pctl)</text>

  <!-- Arrow down -->
  <line x1="240" y1="50" x2="240" y2="70" stroke="#212529" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Decision 1: Too many above? -->
  <polygon points="240,75 330,110 240,145 150,110" fill="#fff" stroke="#212529" stroke-width="1.5"/>
  <text x="240" y="105" text-anchor="middle" font-size="9" fill="#212529">Too many above ailing?</text>
  <text x="240" y="118" text-anchor="middle" font-size="8" fill="#6c757d">(&gt;0.3% of data)</text>

  <!-- NO branch - right then down to Done -->
  <line x1="330" y1="110" x2="400" y2="110" stroke="#212529" stroke-width="1.5"/>
  <line x1="400" y1="110" x2="400" y2="350" stroke="#212529" stroke-width="1.5"/>
  <line x1="400" y1="350" x2="315" y2="350" stroke="#212529" stroke-width="1.5" marker-end="url(#arrow-thick)"/>
  <text x="350" y="103" font-size="9" fill="#212529" font-weight="bold">NO</text>

  <!-- YES branch - down -->
  <line x1="240" y1="145" x2="240" y2="165" stroke="#212529" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="250" y="158" font-size="9" fill="#212529" font-weight="bold">YES</text>

  <!-- Decision 2: Next value exists? -->
  <polygon points="240,170 330,205 240,240 150,205" fill="#fff" stroke="#212529" stroke-width="1.5"/>
  <text x="240" y="202" text-anchor="middle" font-size="9" fill="#212529">At least 1 data point</text>
  <text x="240" y="215" text-anchor="middle" font-size="9" fill="#212529">above border?</text>

  <!-- YES - left: set border to next value, loop back -->
  <line x1="150" y1="205" x2="100" y2="205" stroke="#212529" stroke-width="1.5"/>
  <line x1="100" y1="205" x2="100" y2="110" stroke="#212529" stroke-width="1.5"/>
  <line x1="100" y1="110" x2="146" y2="110" stroke="#212529" stroke-width="1.5" marker-end="url(#arrow-thick)"/>
  <text x="115" y="198" font-size="9" fill="#212529" font-weight="bold">YES</text>

  <!-- Box on left loop: border = next value -->
  <rect x="50" y="135" width="110" height="40" rx="4" fill="#ffed50" stroke="#e7d749" stroke-width="1.5"/>
  <text x="105" y="151" text-anchor="middle" font-size="9" fill="#212529" font-weight="bold">border =</text>
  <text x="105" y="165" text-anchor="middle" font-size="8" fill="#212529">first data point above border</text>

  <!-- NO - down: add 0.01 -->
  <line x1="240" y1="240" x2="240" y2="260" stroke="#212529" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="250" y="253" font-size="9" fill="#212529" font-weight="bold">NO</text>

  <!-- Add 0.01 box -->
  <rect x="170" y="265" width="140" height="40" rx="4" fill="#ffed50" stroke="#e7d749" stroke-width="1.5"/>
  <text x="240" y="287" text-anchor="middle" font-size="9" fill="#212529" font-weight="bold">border += 0.01</text>

  <!-- Arrow from add 0.01 down to Done -->
  <line x1="240" y1="305" x2="240" y2="325" stroke="#212529" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Done box (bottom) -->
  <rect x="170" y="330" width="140" height="40" rx="4" fill="#28a745" stroke="#1e7e34" stroke-width="1.5"/>
  <text x="240" y="354" text-anchor="middle" font-size="10" fill="#fff" font-weight="bold">Done</text>

</svg>
