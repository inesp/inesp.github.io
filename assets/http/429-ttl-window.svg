<svg viewBox="0 0 620 150" xmlns="http://www.w3.org/2000/svg" font-family="system-ui, -apple-system, sans-serif">
  <rect width="620" height="150" fill="#fff"/>
  <!-- Title -->
  <text x="305" y="20" text-anchor="middle" font-size="11" fill="#212529" font-weight="bold">Redis TTL = Rate Limit Window</text>

  <!-- Timeline axis -->
  <line x1="30" y1="90" x2="590" y2="90" stroke="#212529" stroke-width="1.5"/>
  <polygon points="590,90 582,86 582,94" fill="#212529"/>
  <text x="595" y="93" font-size="8" fill="#6c757d">time</text>

  <!-- First API call -->
  <circle cx="60" cy="90" r="5" fill="#212529"/>
  <text x="60" y="110" text-anchor="middle" font-size="8" fill="#212529">API call</text>

  <!-- Arrow down to 429 -->
  <line x1="60" y1="85" x2="60" y2="55" stroke="#212529" stroke-width="1.5"/>
  <polygon points="60,50 56,58 64,58" fill="#212529"/>

  <!-- 429 response -->
  <rect x="30" y="25" width="60" height="25" fill="#ffdddd" stroke="#fd456f" rx="4"/>
  <text x="60" y="42" text-anchor="middle" font-size="9" fill="#fd456f" font-weight="bold">429</text>

  <!-- Retry-After label -->
  <text x="95" y="38" font-size="8" fill="#6c757d">Retry-After: 30s</text>

  <!-- Rate limit window - the Redis TTL period -->
  <rect x="100" y="70" width="350" height="40" fill="#ffed50" fill-opacity="0.3" stroke="#e0a800" stroke-width="1.5" stroke-dasharray="4,2"/>

  <!-- Redis cache bar inside -->
  <rect x="105" y="78" width="340" height="24" fill="#ffed50" stroke="#e0a800" stroke-width="1.5" rx="2"/>
  <text x="275" y="94" text-anchor="middle" font-size="9" fill="#212529" font-weight="bold">Redis cache: 429 response (TTL = 30 seconds)</text>

  <!-- Blocked requests -->
  <circle cx="150" cy="120" r="3" fill="#fd456f"/>
  <line x1="150" y1="117" x2="150" y2="102" stroke="#fd456f" stroke-width="1.5" stroke-dasharray="2,2"/>
  <text x="150" y="133" text-anchor="middle" font-size="6" fill="#fd456f">blocked</text>

  <circle cx="220" cy="120" r="3" fill="#fd456f"/>
  <line x1="220" y1="117" x2="220" y2="102" stroke="#fd456f" stroke-width="1.5" stroke-dasharray="2,2"/>
  <text x="220" y="133" text-anchor="middle" font-size="6" fill="#fd456f">blocked</text>

  <circle cx="300" cy="120" r="3" fill="#fd456f"/>
  <line x1="300" y1="117" x2="300" y2="102" stroke="#fd456f" stroke-width="1.5" stroke-dasharray="2,2"/>
  <text x="300" y="133" text-anchor="middle" font-size="6" fill="#fd456f">blocked</text>

  <circle cx="380" cy="120" r="3" fill="#fd456f"/>
  <line x1="380" y1="117" x2="380" y2="102" stroke="#fd456f" stroke-width="1.5" stroke-dasharray="2,2"/>
  <text x="380" y="133" text-anchor="middle" font-size="6" fill="#fd456f">blocked</text>

  <!-- TTL expires marker -->
  <line x1="450" y1="65" x2="450" y2="115" stroke="#22a522" stroke-width="2"/>
  <text x="450" y="60" text-anchor="middle" font-size="8" fill="#22a522" font-weight="bold">TTL expires</text>
  <text x="450" y="128" text-anchor="middle" font-size="7" fill="#22a522">cache gone</text>

  <!-- Successful request after window -->
  <circle cx="520" cy="90" r="5" fill="#22a522"/>
  <text x="520" y="110" text-anchor="middle" font-size="8" fill="#22a522">API call</text>

  <!-- Arrow up to 200 -->
  <line x1="520" y1="88" x2="520" y2="55" stroke="#22a522" stroke-width="1.5"/>
  <polygon points="520,50 516,58 524,58" fill="#22a522"/>

  <!-- 200 response -->
  <rect x="490" y="25" width="60" height="25" fill="#ddffdd" stroke="#22a522" rx="4"/>
  <text x="520" y="42" text-anchor="middle" font-size="9" fill="#22a522" font-weight="bold">200 OK</text>
</svg>
